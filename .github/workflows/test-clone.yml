name: Test Clone

on:
  workflow_dispatch:

jobs:
  test-clone:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '14'

    - name: Install dependencies
      run: | 
        npm install axios
        npm install nodegit
        npm install child_process

    - name: Test Clone
      uses: actions/github-script@v6
      with:
        script: |
          const { execSync } = require('child_process');
          execSync(`https://rudra099999:${{ secrets.ADO_TOKEN }}@dev.azure.com/rudra099999/rudra099999/_git/rudra_repo`);
          console.log(execSync('ls', { encoding: 'utf-8' }));
        
